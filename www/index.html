<h1 id="eephttpd">eephttpd</h1>
<p>So, basically everything I put on i2p is a bunch of static files. Until now, I tried to host them using darkhttpd(a fork of lighttpd from Alpine which functions as a static Web Server) and by adding tunnel configuration information to tunnels.conf for i2pd. This is easier than manipulating a web interface, but still tedious and kind of error-prone. So instead, this serves simple static sites directly to i2p via the SAM API.</p>
<p>to build:</p>
<pre><code>    git clone https://github.com/eyedeekay/eephttpd &amp;&amp; cd eephttpd
    go get -u &quot;github.com/eyedeekay/sam-forwarder&quot;
    go get -u &quot;github.com/eyedeekay/sam-forwarder/config&quot;
    go build</code></pre>
<p>to run:</p>
<pre><code>    ./eephttpd</code></pre>
<p>will serve the files from ./www, and store i2p keys in the working directory.</p>
<h2 id="usage"><a href="USAGE.md">Usage</a></h2>
<h1 id="eephttpd---static-file-server-automatically-forwarded-to-i2p">eephttpd - Static file server automatically forwarded to i2p</h1>
<h2 id="usage-1">usage:</h2>
<p>eephttpd is a static http server which automatically runs on i2p with the help of the SAM bridge. By default it will only be available from the localhost and it's i2p tunnel. It can be masked from the localhost using a container.</p>
<pre><code>Usage of ./eephttpd:
  -a string
        hostname to serve on (default &quot;127.0.0.1&quot;)
  -c    Use an encrypted leaseset(true or false)
  -d string
        the directory of static files to host(default ./www) (default &quot;./www&quot;)
  -f string
        Use an ini file for configuration (default &quot;none&quot;)
  -g    Uze gzip(true or false) (default true)
  -i    save i2p keys(and thus destinations) across reboots (default true)
  -ib int
        Set inbound tunnel backup quantity(0 to 5) (default 4)
  -il int
        Set inbound tunnel length(0 to 7) (default 3)
  -iq int
        Set inbound tunnel quantity(0 to 15) (default 8)
  -iv int
        Set inbound tunnel length variance(-7 to 7)
  -l string
        Type of access list to use, can be &quot;whitelist&quot; &quot;blacklist&quot; or &quot;none&quot;. (default &quot;none&quot;)
  -m string
        Certificate name to use (default &quot;cert&quot;)
  -n string
        name to give the tunnel(default eephttpd) (default &quot;eephttpd&quot;)
  -ob int
        Set outbound tunnel backup quantity(0 to 5) (default 4)
  -ol int
        Set outbound tunnel length(0 to 7) (default 3)
  -oq int
        Set outbound tunnel quantity(0 to 15) (default 8)
  -ov int
        Set outbound tunnel length variance(-7 to 7)
  -p string
        port to serve locally on (default &quot;7880&quot;)
  -r    Reduce tunnel quantity when idle(true or false)
  -rc int
        Reduce idle tunnel quantity to X (0 to 5) (default 3)
  -rt int
        Reduce tunnel quantity after X (milliseconds) (default 600000)
  -s string
        the directory to save the keys in(default ./) (default &quot;.&quot;)
  -sh string
        sam host to connect to (default &quot;127.0.0.1&quot;)
  -sp string
        sam port to connect to (default &quot;7656&quot;)
  -t    Generate or use an existing TLS certificate
  -z    Allow zero-hop, non-anonymous tunnels(true or false)</code></pre>
<h3 id="build-in-docker">build in docker</h3>
<pre><code>docker build --build-arg user=eephttpd \
    --build-arg path=example/www \
    -f Dockerfile -t \
    eyedeekay/eephttpd .</code></pre>
<h3 id="run-in-docker">Run in docker</h3>
<pre><code>docker run -i -t -d \
    --name eephttpd-volume \
    --volume eephttpd:/opt/eephttpd/ \
    eyedeekay/eephttpd</code></pre>
<pre><code>docker run -i -t -d \
    --network si \
    --env samhost=sam-host \
    --env samport=7656 \
    --env args=-r # Additional arguments to pass to eephttpd\
    --network-alias eephttpd \
    --hostname eephttpd \
    --name eephttpd \
    --restart always \
    --volumes-from eephttpd-volume \
    eyedeekay/eephttpd</code></pre>
<h2 id="instance">instance</h2>
<p>a running instance of eephttpd with the example index file is availble on <a href="http://566niximlxdzpanmn4qouucvua3k7neniwss47li5r6ugoertzuq.b32.i2p" class="uri">http://566niximlxdzpanmn4qouucvua3k7neniwss47li5r6ugoertzuq.b32.i2p</a></p>
